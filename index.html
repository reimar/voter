<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Voter</title>
		<meta name="description" content="Dead simple digital voting cards" />
		<meta name="author" content="Reimar Servas" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<style>
			html,
			body {
				-webkit-overflow-scrolling: touch;
				background: black;
				margin: 0;
				overflow-y: hidden;
				padding: 0;
				position: fixed;
			}

			body {
				display: flex;
				overflow: auto;
				scroll-snap-type: x mandatory;
				width: 100vw;
			}

			body::-webkit-scrollbar {
				display: none;
			}

			.card {
				height: calc(100vh - calc(100vh - 100%));
				height: 100dvh;
				min-width: 100vw;
				scroll-snap-align: center;
				display: flex;
				align-items: center;
				position: relative;
			}

			.symbol {
				font-size: 25vw;
				text-align: center;
				width: 100%;
			}

			.counter {
				background: #fff;
				border-radius: 24px;
				bottom: 40px;
				display: flex;
				flex-direction: column;
				left: 40px;
				overflow: scroll;
				position: absolute;
				right: 40px;
				scroll-snap-type: y mandatory;
				top: 55vh;
			}

			.counter::-webkit-scrollbar {
				display: none;
			}

			.counterDigit {
				font-family: Verdana, Geneva, Tahoma, sans-serif;
				font-size: 10vh;
				height: 100%;
				scroll-snap-align: center;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<script>
			(function () {
				// settings
				const counterMaxVal = 100;

				// read and interpret url params
				const urlParams = new URLSearchParams(window.location.search);

				// colors
				const defaultColors = ["FF6332", "36A800"];
				const colors = urlParams.has("colors") ? urlParams.get("colors").split(",") : defaultColors;

				// symbols
				const symbols = urlParams.has("symbols") ? urlParams.get("symbols").split(",") : false;

				// counter
				const showCounter = urlParams.has("counter") ? true : false;

				// create cards
				colors.forEach((color, index) => {
					let $card = document.createElement("div");
					let $markup = ``;

					$card.className = "card";
					$card.style.backgroundColor = "#" + color;
					document.body.append($card);

					if (symbols) {
						$markup += `<span class="symbol">${symbols[index]}</span>`;
					}

					if (showCounter) {
						$markup += `
							<div class="counter">
								${(() => {
									let $markUp = ``;
									let n = 1;

									while (n <= counterMaxVal) {
										$markUp += `<p class="counterDigit">${n}</p>`;
										n++;
									}
									return $markUp;
								})()}
							</button>
						`;
					}

					$card.innerHTML = $markup;
				});
			})();
		</script>
	</body>
</html>
